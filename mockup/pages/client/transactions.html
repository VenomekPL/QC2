<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transactions - QCrypto Client Panel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="../../assets/css/reset.css"><link rel="stylesheet" href="../../assets/css/variables.css"><link rel="stylesheet" href="../../assets/css/global.css"><link rel="stylesheet" href="../../assets/css/layout.css">
</head>
<body>
  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="layout-sidebar">
  <div class="sidebar-logo">
    <span class="sidebar-logo-text">QCrypto</span>
  </div>

  <nav class="sidebar-nav">
    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Client</div>
      <a href="dashboard.html" class="sidebar-nav-item" data-page="dashboard">
        <span class="sidebar-nav-icon">üìä</span>
        <span class="sidebar-nav-text">Dashboard</span>
      </a>
      <a href="wallets.html" class="sidebar-nav-item" data-page="wallets">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Wallets</span>
      </a>
      <a href="transactions.html" class="sidebar-nav-item" data-page="transactions">
        <span class="sidebar-nav-icon">üìù</span>
        <span class="sidebar-nav-text">Transactions</span>
        <span class="sidebar-nav-badge">3</span>
      </a>
      <a href="address-book.html" class="sidebar-nav-item" data-page="address-book">
        <span class="sidebar-nav-icon">üìñ</span>
        <span class="sidebar-nav-text">Address Book</span>
      </a>
      <a href="deposit.html" class="sidebar-nav-item" data-page="deposit">
        <span class="sidebar-nav-icon">‚¨áÔ∏è</span>
        <span class="sidebar-nav-text">Deposit</span>
      </a>
      <a href="withdraw.html" class="sidebar-nav-item" data-page="withdraw">
        <span class="sidebar-nav-icon">‚¨ÜÔ∏è</span>
        <span class="sidebar-nav-text">Withdraw</span>
      </a>
      <a href="staking.html" class="sidebar-nav-item" data-page="staking">
        <span class="sidebar-nav-icon">‚ö°</span>
        <span class="sidebar-nav-text">Staking</span>
      </a>
      <a href="settlement.html" class="sidebar-nav-item" data-page="settlement">
        <span class="sidebar-nav-icon">üèõÔ∏è</span>
        <span class="sidebar-nav-text">Settlement</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">AIFM</div>
      <a href="../aifm/aifm-dashboard.html" class="sidebar-nav-item" data-page="aifm-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">AIFM Dashboard</span>
      </a>
      <a href="../aifm/fund-manager-dashboard.html" class="sidebar-nav-item" data-page="fund-manager-dashboard">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Fund Manager</span>
      </a>
      <a href="../aifm/trader-dashboard.html" class="sidebar-nav-item" data-page="trader-dashboard">
        <span class="sidebar-nav-icon">üíπ</span>
        <span class="sidebar-nav-text">Trader</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Operations</div>
      <a href="../aifm/middle-office-dashboard.html" class="sidebar-nav-item" data-page="middle-office-dashboard">
        <span class="sidebar-nav-icon">üìã</span>
        <span class="sidebar-nav-text">Middle Office</span>
      </a>
      <a href="../aifm/depositary-dashboard.html" class="sidebar-nav-item" data-page="depositary-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">Depositary</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Admin</div>
      <a href="../admin/q-admin-dashboard.html" class="sidebar-nav-item" data-page="q-admin-dashboard">
        <span class="sidebar-nav-icon">‚öôÔ∏è</span>
        <span class="sidebar-nav-text">Q-Admin</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Settings</div>
      <a href="security.html" class="sidebar-nav-item" data-page="security">
        <span class="sidebar-nav-icon">üîí</span>
        <span class="sidebar-nav-text">Security</span>
      </a>
      <a href="profile.html" class="sidebar-nav-item" data-page="profile">
        <span class="sidebar-nav-icon">üë§</span>
        <span class="sidebar-nav-text">Profile</span>
      </a>
    </div>
  </nav>
</aside>


    <!-- Main Content -->
    <main class="layout-main">
      <!-- Top Bar -->
      <header class="topbar">
        <div class="topbar-left">
          <button class="btn btn-secondary btn-sm">‚ò∞</button>
        </div>

        <div class="topbar-center">
          <div class="search-bar">
            <span class="search-icon">üîç</span>
            <input type="search" class="search-input" placeholder="Search transactions, addresses...">
          </div>
        </div>

        <div class="topbar-right">
          <div class="notification-icon">
            <span>üîî</span>
            <span class="notification-count">5</span>
          </div>

          <div class="user-menu">
            <div class="user-avatar">JD</div>
            <div class="user-info">
              <div class="user-name">John Doe</div>
              <div class="user-role">Retail Client</div>
            </div>
          </div>
        </div>
      </header>

      <!-- Page Content -->
      <div class="content-container">
        <!-- Advanced Filters -->
        <div class="card mb-6">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-4);">
            <!-- Search -->
            <div style="grid-column: 1 / -1;">
              <label style="display: block; font-size: var(--text-xs); font-weight: var(--font-bold); margin-bottom: var(--space-2); color: var(--text-secondary);">Search</label>
              <div style="position: relative;">
                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%);">üîç</span>
                <input type="text" placeholder="Search by Transaction Hash, Address, or Note..." style="padding-left: 36px; width: 100%; box-sizing: border-box; padding-top: 8px; padding-bottom: 8px; border: 1px solid var(--border-light); border-radius: var(--radius-md);">
              </div>
            </div>

            <!-- Date Range -->
            <div style="grid-column: span 2;">
              <label style="display: block; font-size: var(--text-xs); font-weight: var(--font-bold); margin-bottom: var(--space-2); color: var(--text-secondary);">Date Range</label>
              <div style="display: flex; gap: var(--space-2);">
                <input type="date" class="select-input" style="width: 100%;">
                <input type="date" class="select-input" style="width: 100%;">
              </div>
            </div>

            <!-- Transaction Type -->
            <div>
              <label style="display: block; font-size: var(--text-xs); font-weight: var(--font-bold); margin-bottom: var(--space-2); color: var(--text-secondary);">Type</label>
              <select class="select-input" style="width: 100%;" id="type-filter" onchange="filterTransactions()">
                <option value="all">All Types</option>
                <option value="deposit">‚¨áÔ∏è Deposit</option>
                <option value="withdrawal">‚¨ÜÔ∏è Withdrawal</option>
                <option value="trade">üîÑ Trade / Swap</option>
                <option value="staking-action">‚ö° Staking / Unstaking</option>
                <option value="staking-reward">üéÅ Staking Reward</option>
                <option value="fee">‚õΩ Network Fee</option>
                <option value="commission">üè¶ Platform Commission</option>
              </select>
            </div>

            <!-- Asset -->
            <div>
              <label style="display: block; font-size: var(--text-xs); font-weight: var(--font-bold); margin-bottom: var(--space-2); color: var(--text-secondary);">Asset</label>
              <select class="select-input" style="width: 100%;">
                <option value="all">All Assets</option>
                <option value="btc">Bitcoin (BTC)</option>
                <option value="eth">Ethereum (ETH)</option>
                <option value="usdc">USDC</option>
                <option value="avax">Avalanche (AVAX)</option>
                <option value="pol">Polygon (POL)</option>
              </select>
            </div>

            <!-- Status -->
            <div>
              <label style="display: block; font-size: var(--text-xs); font-weight: var(--font-bold); margin-bottom: var(--space-2); color: var(--text-secondary);">Status</label>
              <select class="select-input" style="width: 100%;">
                <option value="all">All Statuses</option>
                <option value="completed">‚úÖ Completed</option>
                <option value="pending">‚è≥ Pending</option>
                <option value="failed">‚ùå Failed</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Transactions Table -->
        <div class="card">
          <div style="overflow-x: auto;">
            <table class="table" style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="border-bottom: 1px solid var(--border-light); text-align: left;">
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Date & Time</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Type</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Asset</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase; text-align: right;">Amount</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase; text-align: right;">Value (EUR)</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase; text-align: right;">Fee</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Tx Hash</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Status</th>
                </tr>
              </thead>
              <tbody id="transactions-list">
                <!-- Row 1: Staking Reward -->
                <tr data-type="staking-reward" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 19, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">üéÅ Staking Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #627EEA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">Œû</div>
                      <span>ETH</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+0.045 ETH</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨126.30</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-tertiary);">-</td>
                  <td style="padding: var(--space-4);">
                    <a href="#" style="font-family: monospace; font-size: var(--text-xs);">0x7a...9f2</a>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>

                <!-- New Row: Staked (Locking) -->
                <tr data-type="staking-action" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 18, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">16:45:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-warning" style="background: rgba(255, 181, 71, 0.1); color: var(--color-warning);">‚ö° Staked</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #627EEA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">Œû</div>
                      <span>ETH</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-primary); font-weight: bold;">-5.00 ETH</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨14,033.00</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-secondary);">0.002 ETH</td>
                  <td style="padding: var(--space-4);">
                    <a href="#" style="font-family: monospace; font-size: var(--text-xs);">0x8b...1c4</a>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Active</span></td>
                </tr>

                <!-- New Row: Unstaked (Unlocking) -->
                <tr data-type="staking-action" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 18, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">10:15:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-info" style="background: rgba(17, 205, 239, 0.1); color: var(--color-info);">‚ö° Unstaked</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #8247E5; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚¨°</div>
                      <span>POL</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+1,000 POL</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨880.00</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-tertiary);">-</td>
                  <td style="padding: var(--space-4);">
                    <a href="#" style="font-family: monospace; font-size: var(--text-xs);">0x3d...7e9</a>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>

                <!-- Row 2: Trade (Swap) -->
                <tr data-type="trade" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 18, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">14:15:22</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-info" style="background: rgba(17, 205, 239, 0.1); color: var(--color-info);">üîÑ Trade</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #2775CA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">$</div>
                      <span>USDC</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; font-weight: bold;">2,000 USDC</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨1,840.00</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-secondary);">‚Ç¨2.50</td>
                  <td style="padding: var(--space-4);">
                    <span style="color: var(--text-tertiary); font-size: var(--text-xs);">Internal</span>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>

                <!-- Row 3: Platform Commission -->
                <tr data-type="commission" style="border-bottom: 1px solid var(--border-light); background: rgba(245, 54, 92, 0.02);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 18, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">14:15:22</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-danger" style="background: rgba(245, 54, 92, 0.1); color: var(--color-danger);">üè¶ Commission</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #2775CA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">$</div>
                      <span>USDC</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-danger); font-weight: bold;">-10.00 USDC</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨9.20</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-tertiary);">-</td>
                  <td style="padding: var(--space-4);">
                    <span style="color: var(--text-tertiary); font-size: var(--text-xs);">Ref: #TR-992</span>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Paid</span></td>
                </tr>

                <!-- Row 4: Withdrawal -->
                <tr data-type="withdrawal" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 15, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">09:45:10</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-warning" style="background: rgba(255, 181, 71, 0.1); color: var(--color-warning);">‚¨ÜÔ∏è Withdrawal</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #F7931A; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚Çø</div>
                      <span>BTC</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-primary); font-weight: bold;">-0.15 BTC</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨4,492.50</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-secondary);">0.0005 BTC</td>
                  <td style="padding: var(--space-4);">
                    <a href="#" style="font-family: monospace; font-size: var(--text-xs);">3a1...8c9</a>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>

                <!-- Row 5: Network Fee (Gas) -->
                <tr data-type="fee" style="border-bottom: 1px solid var(--border-light); background: rgba(0,0,0,0.01);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 15, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">09:45:10</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-secondary" style="background: var(--bg-hover); color: var(--text-secondary);">‚õΩ Network Fee</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #F7931A; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚Çø</div>
                      <span>BTC</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-secondary);">-0.0005 BTC</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨14.97</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-tertiary);">-</td>
                  <td style="padding: var(--space-4);">
                    <span style="color: var(--text-tertiary); font-size: var(--text-xs);">Gas</span>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Paid</span></td>
                </tr>

                <!-- Row 6: Deposit -->
                <tr data-type="deposit" style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 10, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">18:20:05</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚¨áÔ∏è Deposit</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #8247E5; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚¨°</div>
                      <span>POL</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+5,000 POL</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨4,400.00</td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--text-tertiary);">-</td>
                  <td style="padding: var(--space-4);">
                    <a href="#" style="font-family: monospace; font-size: var(--text-xs);">0x9b...2e1</a>
                  </td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Infinite Scroll Loader -->
          <div id="loading-indicator" style="display: none; padding: var(--space-6); text-align: center; color: var(--text-secondary);">
            <div style="display: inline-block; width: 24px; height: 24px; border: 3px solid rgba(0,0,0,0.1); border-radius: 50%; border-top-color: var(--color-primary); animation: spin 1s ease-in-out infinite;"></div>
            <div style="margin-top: var(--space-2); font-size: var(--text-sm);">Loading more transactions...</div>
          </div>
          
          <style>
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
          </style>
        </div>
      </div>
    </main>
  </div>  <script src="../../assets/js/nav-active.js"></script>


  
  <script src="../../assets/js/app.js"></script>
  <script>
    function exportReport(type) {
      const btn = event.currentTarget;
      const originalText = btn.innerHTML;
      btn.innerHTML = '‚è≥ Generating...';
      btn.disabled = true;
      
      setTimeout(() => {
        btn.innerHTML = originalText;
        btn.disabled = false;
        showSuccessMessage(`Your ${type.toUpperCase()} report has been generated and downloaded.`);
      }, 1500);
    }

    function filterTransactions() {
      const type = document.getElementById('type-filter').value;
      const rows = document.querySelectorAll('#transactions-list tr');
      
      rows.forEach(row => {
        if (type === 'all' || row.getAttribute('data-type') === type) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }

    // Infinite Scroll Logic
    document.addEventListener('DOMContentLoaded', () => {
      const tableBody = document.getElementById('transactions-list');
      const loadingIndicator = document.getElementById('loading-indicator');
      let isLoading = false;

      // Initial set of rows to clone
      const initialRows = Array.from(tableBody.querySelectorAll('tr'));

      const loadMoreTransactions = () => {
        if (isLoading) return;
        isLoading = true;
        loadingIndicator.style.display = 'block';

        // Simulate network delay
        setTimeout(() => {
          // Clone the initial rows and append them
          initialRows.forEach(row => {
            const clone = row.cloneNode(true);
            tableBody.appendChild(clone);
          });

          isLoading = false;
          loadingIndicator.style.display = 'none';

          // If content is still shorter than viewport, load more immediately
          checkScroll();
        }, 800); 
      };

      const checkScroll = () => {
        // Use document.documentElement.scrollHeight for total page height
        // Use window.innerHeight + window.scrollY for current bottom position
        const totalHeight = document.documentElement.scrollHeight;
        const currentBottom = window.innerHeight + window.scrollY;

        // Trigger if we are near the bottom (within 100px) OR if content is too short
        if (currentBottom >= totalHeight - 100) {
          loadMoreTransactions();
        }
      };

      window.addEventListener('scroll', checkScroll);
      
      // Initial check to fill the page if it's empty or short
      checkScroll();
    });
  </script>
</body>
</html>
