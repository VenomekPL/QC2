<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settlement - QCrypto Client Panel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="../../assets/css/reset.css"><link rel="stylesheet" href="../../assets/css/variables.css"><link rel="stylesheet" href="../../assets/css/global.css"><link rel="stylesheet" href="../../assets/css/layout.css">
  <style>
    .label-text {
      display: block;
      font-size: var(--text-xs);
      font-weight: var(--font-bold);
      color: var(--text-secondary);
      margin-bottom: var(--space-2);
      text-transform: uppercase;
    }
    .value-text {
      font-size: var(--text-md);
      font-weight: var(--font-medium);
      color: var(--text-primary);
      padding: var(--space-3);
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-light);
    }
    .copy-text {
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .copy-text:hover {
      background: var(--bg-hover);
    }
    .tab-btn {
      transition: all 0.2s;
    }
    .tab-btn:hover {
      color: var(--color-primary) !important;
    }
  </style>
</head>
<body>
  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="layout-sidebar">
  <div class="sidebar-logo">
    <span class="sidebar-logo-text">QCrypto</span>
  </div>

    <nav class="sidebar-nav">
    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Client</div>
      <a href="dashboard.html" class="sidebar-nav-item" data-page="dashboard">
        <span class="sidebar-nav-icon">üìä</span>
        <span class="sidebar-nav-text">Dashboard</span>
      </a>
      <a href="wallets.html" class="sidebar-nav-item" data-page="wallets">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Wallets</span>
      </a>
      <a href="transactions.html" class="sidebar-nav-item" data-page="transactions">
        <span class="sidebar-nav-icon">üìù</span>
        <span class="sidebar-nav-text">Transactions</span>
        <span class="sidebar-nav-badge">3</span>
      </a>
      <a href="address-book.html" class="sidebar-nav-item" data-page="address-book">
        <span class="sidebar-nav-icon">üìñ</span>
        <span class="sidebar-nav-text">Address Book</span>
      </a>
      <a href="deposit.html" class="sidebar-nav-item" data-page="deposit">
        <span class="sidebar-nav-icon">‚¨áÔ∏è</span>
        <span class="sidebar-nav-text">Deposit</span>
      </a>
      <a href="withdraw.html" class="sidebar-nav-item" data-page="withdraw">
        <span class="sidebar-nav-icon">‚¨ÜÔ∏è</span>
        <span class="sidebar-nav-text">Withdraw</span>
      </a>
      <a href="staking.html" class="sidebar-nav-item" data-page="staking">
        <span class="sidebar-nav-icon">‚ö°</span>
        <span class="sidebar-nav-text">Staking</span>
      </a>
      <a href="settlement.html" class="sidebar-nav-item" data-page="settlement">
        <span class="sidebar-nav-icon">üèõÔ∏è</span>
        <span class="sidebar-nav-text">Settlement</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
          <div class="sidebar-nav-section-title">Admin</div>
          <a href="../admin/admin-overview.html" class="sidebar-nav-item" data-page="admin-overview">
            <span class="sidebar-nav-icon">üìä</span>
            <span class="sidebar-nav-text">Overview</span>
          </a>
          <a href="../admin/admin-clients.html" class="sidebar-nav-item" data-page="admin-clients">
            <span class="sidebar-nav-icon">üë•</span>
            <span class="sidebar-nav-text">Clients</span>
          </a>
          <a href="../admin/admin-users.html" class="sidebar-nav-item" data-page="admin-users">
            <span class="sidebar-nav-icon">üë§</span>
            <span class="sidebar-nav-text">Users</span>
          </a>
          <a href="../admin/admin-crypto.html" class="sidebar-nav-item" data-page="admin-crypto">
            <span class="sidebar-nav-icon">ü™ô</span>
            <span class="sidebar-nav-text">Crypto</span>
          </a>
          <a href="../admin/admin-commissions.html" class="sidebar-nav-item" data-page="admin-commissions">
            <span class="sidebar-nav-icon">üí∞</span>
            <span class="sidebar-nav-text">Commissions</span>
          </a>
          <a href="../admin/admin-settlement.html" class="sidebar-nav-item" data-page="admin-settlement">
            <span class="sidebar-nav-icon">üèõÔ∏è</span>
            <span class="sidebar-nav-text">Settlement</span>
          </a>
          <a href="../admin/admin-compliance.html" class="sidebar-nav-item" data-page="admin-compliance">
            <span class="sidebar-nav-icon">üìú</span>
            <span class="sidebar-nav-text">Compliance</span>
          </a>
          <a href="../admin/admin-administration.html" class="sidebar-nav-item" data-page="admin-administration">
            <span class="sidebar-nav-icon">‚öôÔ∏è</span>
            <span class="sidebar-nav-text">Administration</span>
          </a>
        </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">AIFM</div>
      <a href="../aifm/aifm-dashboard.html" class="sidebar-nav-item" data-page="aifm-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">AIFM Dashboard</span>
      </a>
      <a href="../aifm/fund-manager-dashboard.html" class="sidebar-nav-item" data-page="fund-manager-dashboard">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Fund Manager</span>
      </a>
      <a href="../aifm/trader-dashboard.html" class="sidebar-nav-item" data-page="trader-dashboard">
        <span class="sidebar-nav-icon">üíπ</span>
        <span class="sidebar-nav-text">Trader</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Operations</div>
      <a href="../aifm/middle-office-dashboard.html" class="sidebar-nav-item" data-page="middle-office-dashboard">
        <span class="sidebar-nav-icon">üìã</span>
        <span class="sidebar-nav-text">Middle Office</span>
      </a>
      <a href="../aifm/depositary-dashboard.html" class="sidebar-nav-item" data-page="depositary-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">Depositary</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Settings</div>
      <a href="security.html" class="sidebar-nav-item" data-page="security">
        <span class="sidebar-nav-icon">üîí</span>
        <span class="sidebar-nav-text">Security</span>
      </a>
      <a href="profile.html" class="sidebar-nav-item" data-page="profile">
        <span class="sidebar-nav-icon">üë§</span>
        <span class="sidebar-nav-text">Profile</span>
      </a>
    </div>
  </nav>
</aside>


    <!-- Main Content -->
    <main class="layout-main">
      <!-- Top Bar -->
      <header class="topbar">
        <div class="topbar-left">
          <button class="btn btn-secondary btn-sm">‚ò∞</button>
        </div>

        <div class="topbar-center">
          <div class="search-bar">
            <span class="search-icon">üîç</span>
            <input type="search" class="search-input" placeholder="Search transactions, addresses...">
          </div>
        </div>

        <div class="topbar-right">
          <div class="notification-icon">
            <span>üîî</span>
            <span class="notification-count">5</span>
          </div>

          <div class="user-menu">
            <div class="user-avatar">JD</div>
            <div class="user-info">
              <div class="user-name">John Doe</div>
              <div class="user-role">Retail Client</div>
            </div>
          </div>
        </div>
      </header>

      <!-- Page Content -->
      <div class="content-container">
        
        <!-- Fiat Balance Section -->
        <div class="card mb-6">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h2 class="card-title">Fiat Account Balance</h2>
            <button class="btn btn-primary" id="withdraw-btn" onclick="openWithdrawModal()">Withdraw Funds</button>
          </div>
          <div style="font-size: 3rem; font-weight: var(--font-bold); color: var(--text-primary); margin: var(--space-4) 0;">
            ‚Ç¨ <span id="fiat-balance">-329,456.83</span>
          </div>
          <p class="text-secondary">Available for withdrawal or settlement.</p>
        </div>

        <!-- Warning Section -->
        <div class="alert alert-danger mb-6" style="display: flex; gap: var(--space-4); align-items: flex-start;">
          <div style="font-size: 24px;">‚ùÑÔ∏è</div>
          <div>
            <h3 style="margin: 0 0 var(--space-2) 0; font-size: var(--text-lg);">Crypto Withdrawals Frozen</h3>
            <p style="margin: 0; color: var(--text-secondary);">
              Please note that all cryptocurrency withdrawals are temporarily suspended until your fiat account settlement is completed. 
              Ensure your account balance is positive or settle any outstanding obligations immediately.
            </p>
          </div>
        </div>

        <!-- Settlement Instructions (Bank Transfer) -->
        <div class="card mb-6">
          <div class="card-header">
            <h2 class="card-title">Settlement Instructions</h2>
            <p class="text-secondary">Use the following bank details to settle your account via wire transfer.</p>
          </div>

          <!-- Tabs -->
          <div style="border-bottom: 1px solid var(--border-light); margin-bottom: var(--space-6); display: flex; gap: var(--space-4);">
            <button id="tab-sepa" class="tab-btn" onclick="switchTab('sepa')" style="padding: var(--space-3) var(--space-6); background: none; border: none; border-bottom: 2px solid var(--color-primary); font-weight: bold; cursor: pointer; color: var(--color-primary);">SEPA (Europe)</button>
            <button id="tab-swift" class="tab-btn" onclick="switchTab('swift')" style="padding: var(--space-3) var(--space-6); background: none; border: none; border-bottom: 2px solid transparent; color: var(--text-secondary); cursor: pointer;">SWIFT (International)</button>
          </div>

          <!-- SEPA Details -->
          <div id="sepa-details" class="transfer-details">
            <div class="grid-2">
              <div>
                <label class="label-text">Beneficiary Name</label>
                <div class="value-text">QCrypto Operations Ltd.</div>
              </div>
              <div>
                <label class="label-text">Bank Name</label>
                <div class="value-text">Deutsche Bank AG</div>
              </div>
              <div style="grid-column: span 2;">
                <label class="label-text">IBAN</label>
                <div class="value-text copy-text" onclick="copyText(this)">DE89 3704 0044 0532 0130 00 <span>üìã</span></div>
              </div>
              <div>
                <label class="label-text">BIC / SWIFT</label>
                <div class="value-text">DEUTDEFF</div>
              </div>
              <div>
                <label class="label-text">Reference / Memo</label>
                <div class="value-text copy-text" onclick="copyText(this)">QC-USER-88291 <span>üìã</span></div>
              </div>
            </div>
          </div>

          <!-- SWIFT Details (Hidden) -->
          <div id="swift-details" class="transfer-details" style="display: none;">
            <div class="grid-2">
              <div>
                <label class="label-text">Beneficiary Name</label>
                <div class="value-text">QCrypto Operations Ltd.</div>
              </div>
              <div>
                <label class="label-text">Bank Name</label>
                <div class="value-text">JPMorgan Chase Bank, N.A.</div>
              </div>
              <div>
                <label class="label-text">Account Number</label>
                <div class="value-text copy-text" onclick="copyText(this)">9876543210 <span>üìã</span></div>
              </div>
              <div>
                <label class="label-text">SWIFT / BIC</label>
                <div class="value-text">CHASUS33</div>
              </div>
              <div style="grid-column: span 2;">
                <label class="label-text">Bank Address</label>
                <div class="value-text">270 Park Avenue, New York, NY 10017, USA</div>
              </div>
              <div>
                <label class="label-text">Reference / Memo</label>
                <div class="value-text copy-text" onclick="copyText(this)">QC-USER-88291 <span>üìã</span></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Withdrawals -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Recent Fiat Withdrawals</h2>
          </div>
          <table class="table" style="width: 100%; border-collapse: collapse;">
            <thead>
              <tr style="text-align: left; color: var(--text-secondary); font-size: var(--text-xs); border-bottom: 1px solid var(--border-light);">
                <th style="padding: var(--space-4);">Date</th>
                <th style="padding: var(--space-4);">Amount</th>
                <th style="padding: var(--space-4);">Method</th>
                <th style="padding: var(--space-4);">Status</th>
                <th style="padding: var(--space-4); text-align: right;">Action</th>
              </tr>
            </thead>
            <tbody id="withdrawal-list">
              <!-- Mock Data -->
              <tr style="border-bottom: 1px solid var(--border-light);">
                <td style="padding: var(--space-4);">Nov 20, 2025</td>
                <td style="padding: var(--space-4); font-weight: bold;">‚Ç¨ 500.00</td>
                <td style="padding: var(--space-4);">SEPA Transfer</td>
                <td style="padding: var(--space-4);"><span class="badge badge-warning">Pending</span></td>
                <td style="padding: var(--space-4); text-align: right;">
                  <button class="btn btn-xs btn-danger" onclick="cancelWithdrawal(this)">Cancel</button>
                </td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-light);">
                <td style="padding: var(--space-4);">Nov 15, 2025</td>
                <td style="padding: var(--space-4); font-weight: bold;">‚Ç¨ 1,200.00</td>
                <td style="padding: var(--space-4);">SWIFT Transfer</td>
                <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                <td style="padding: var(--space-4); text-align: right;">
                  <span class="text-secondary text-xs">-</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <!-- Withdraw Modal -->
  <div id="withdraw-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div class="card" style="width: 450px; max-width: 90%;">
      <div class="card-header">
        <h2 class="card-title">Withdraw Fiat</h2>
        <button onclick="closeWithdrawModal()" style="background: none; border: none; font-size: 20px; cursor: pointer;">&times;</button>
      </div>
      
      <form onsubmit="handleWithdrawSubmit(event)">
        <div class="mb-4">
          <label class="d-block mb-2 font-medium">Amount (EUR)</label>
          <div style="position: relative;">
            <input type="number" id="withdraw-amount" class="form-input" placeholder="0.00" required style="padding-right: 60px;">
            <button type="button" onclick="setMaxAmount()" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: var(--bg-secondary); border: 1px solid var(--border-light); border-radius: 4px; padding: 2px 6px; font-size: 12px; font-weight: bold; color: var(--color-primary); cursor: pointer;">MAX</button>
          </div>
          <div class="text-secondary text-xs mt-2">Available: <span id="modal-available-balance">‚Ç¨ -329,456.83</span></div>
        </div>

        <div class="mb-6">
          <label class="d-block mb-2 font-medium">Bank Account</label>
          <select class="form-input" onchange="handleAccountChange(this)">
            <option value="existing">DE89 **** **** **** 0130 (Deutsche Bank)</option>
            <option value="new">Add New Account...</option>
          </select>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%;">Request Withdrawal</button>
      </form>
    </div>
  </div>

  <script src="../../assets/js/nav-active.js"></script>
  <script src="../../assets/js/app.js"></script>
  <script>
    function switchTab(tab) {
      // Reset tabs
      document.getElementById('tab-sepa').style.borderBottomColor = 'transparent';
      document.getElementById('tab-sepa').style.color = 'var(--text-secondary)';
      document.getElementById('tab-swift').style.borderBottomColor = 'transparent';
      document.getElementById('tab-swift').style.color = 'var(--text-secondary)';
      
      // Hide content
      document.getElementById('sepa-details').style.display = 'none';
      document.getElementById('swift-details').style.display = 'none';

      // Activate selected
      document.getElementById('tab-' + tab).style.borderBottomColor = 'var(--color-primary)';
      document.getElementById('tab-' + tab).style.color = 'var(--color-primary)';
      document.getElementById(tab + '-details').style.display = 'block';
    }

    function copyText(element) {
      const text = element.innerText.replace('üìã', '').trim();
      navigator.clipboard.writeText(text).then(() => {
        const original = element.innerHTML;
        element.innerHTML = 'Copied! ‚úÖ';
        setTimeout(() => {
          element.innerHTML = original;
        }, 1500);
      });
    }

    function openWithdrawModal() {
      document.getElementById('withdraw-modal').style.display = 'flex';
    }

    function closeWithdrawModal() {
      document.getElementById('withdraw-modal').style.display = 'none';
    }

    function setMaxAmount() {
      // For example purpose, we just copy the balance value (ignoring negative sign for input)
      // In a real app, you wouldn't withdraw from a negative balance.
      const balanceText = document.getElementById('fiat-balance').innerText;
      const balance = parseFloat(balanceText.replace(/,/g, ''));
      document.getElementById('withdraw-amount').value = Math.abs(balance);
    }

    function handleAccountChange(select) {
      if (select.value === 'new') {
        alert('Notification: Only accounts that were used to make a deposit can be used for withdrawal.');
        select.value = 'existing'; // Reset selection
      }
    }

    function handleWithdrawSubmit(e) {
      e.preventDefault();
      alert('Withdrawal request submitted successfully!');
      closeWithdrawModal();
      // Add row to table (mock)
      const tbody = document.getElementById('withdrawal-list');
      const row = document.createElement('tr');
      row.style.borderBottom = '1px solid var(--border-light)';
      row.innerHTML = `
        <td style="padding: var(--space-4);">Just Now</td>
        <td style="padding: var(--space-4); font-weight: bold;">‚Ç¨ ${document.getElementById('withdraw-amount').value}</td>
        <td style="padding: var(--space-4);">SEPA Transfer</td>
        <td style="padding: var(--space-4);"><span class="badge badge-warning">Pending</span></td>
        <td style="padding: var(--space-4); text-align: right;">
          <button class="btn btn-xs btn-danger" onclick="cancelWithdrawal(this)">Cancel</button>
        </td>
      `;
      tbody.insertBefore(row, tbody.firstChild);
    }

    function cancelWithdrawal(btn) {
      if(confirm('Are you sure you want to cancel this withdrawal request?')) {
        const row = btn.closest('tr');
        row.querySelector('.badge').className = 'badge badge-danger';
        row.querySelector('.badge').textContent = 'Cancelled';
        btn.remove();
      }
    }
  </script>
</body>
</html>