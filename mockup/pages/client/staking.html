<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staking - QCrypto Client Panel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="../../assets/css/reset.css"><link rel="stylesheet" href="../../assets/css/variables.css"><link rel="stylesheet" href="../../assets/css/global.css"><link rel="stylesheet" href="../../assets/css/layout.css">
  <style>
    .staking-card-header {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      margin-bottom: var(--space-6);
    }
    .staking-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 28px;
      font-weight: bold;
    }
    .stake-panel {
      display: none;
      margin-top: var(--space-6);
      padding: var(--space-6);
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      border: 2px dashed var(--border-light);
    }
    .stake-panel.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="layout-sidebar">
  <div class="sidebar-logo">
    <span class="sidebar-logo-text">QCrypto</span>
  </div>

  <nav class="sidebar-nav">
    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Client</div>
      <a href="dashboard.html" class="sidebar-nav-item" data-page="dashboard">
        <span class="sidebar-nav-icon">üìä</span>
        <span class="sidebar-nav-text">Dashboard</span>
      </a>
      <a href="wallets.html" class="sidebar-nav-item" data-page="wallets">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Wallets</span>
      </a>
      <a href="transactions.html" class="sidebar-nav-item" data-page="transactions">
        <span class="sidebar-nav-icon">üìù</span>
        <span class="sidebar-nav-text">Transactions</span>
        <span class="sidebar-nav-badge">3</span>
      </a>
      <a href="address-book.html" class="sidebar-nav-item" data-page="address-book">
        <span class="sidebar-nav-icon">üìñ</span>
        <span class="sidebar-nav-text">Address Book</span>
      </a>
      <a href="deposit.html" class="sidebar-nav-item" data-page="deposit">
        <span class="sidebar-nav-icon">‚¨áÔ∏è</span>
        <span class="sidebar-nav-text">Deposit</span>
      </a>
      <a href="withdraw.html" class="sidebar-nav-item" data-page="withdraw">
        <span class="sidebar-nav-icon">‚¨ÜÔ∏è</span>
        <span class="sidebar-nav-text">Withdraw</span>
      </a>
      <a href="staking.html" class="sidebar-nav-item" data-page="staking">
        <span class="sidebar-nav-icon">‚ö°</span>
        <span class="sidebar-nav-text">Staking</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">AIFM</div>
      <a href="../aifm/aifm-dashboard.html" class="sidebar-nav-item" data-page="aifm-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">AIFM Dashboard</span>
      </a>
      <a href="../aifm/fund-manager-dashboard.html" class="sidebar-nav-item" data-page="fund-manager-dashboard">
        <span class="sidebar-nav-icon">üíº</span>
        <span class="sidebar-nav-text">Fund Manager</span>
      </a>
      <a href="../aifm/trader-dashboard.html" class="sidebar-nav-item" data-page="trader-dashboard">
        <span class="sidebar-nav-icon">üíπ</span>
        <span class="sidebar-nav-text">Trader</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Operations</div>
      <a href="../aifm/middle-office-dashboard.html" class="sidebar-nav-item" data-page="middle-office-dashboard">
        <span class="sidebar-nav-icon">üìã</span>
        <span class="sidebar-nav-text">Middle Office</span>
      </a>
      <a href="../aifm/depositary-dashboard.html" class="sidebar-nav-item" data-page="depositary-dashboard">
        <span class="sidebar-nav-icon">üè¶</span>
        <span class="sidebar-nav-text">Depositary</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Admin</div>
      <a href="../admin/q-admin-dashboard.html" class="sidebar-nav-item" data-page="q-admin-dashboard">
        <span class="sidebar-nav-icon">‚öôÔ∏è</span>
        <span class="sidebar-nav-text">Q-Admin</span>
      </a>
    </div>

    <div class="sidebar-nav-section">
      <div class="sidebar-nav-section-title">Settings</div>
      <a href="security.html" class="sidebar-nav-item" data-page="security">
        <span class="sidebar-nav-icon">üîí</span>
        <span class="sidebar-nav-text">Security</span>
      </a>
      <a href="profile.html" class="sidebar-nav-item" data-page="profile">
        <span class="sidebar-nav-icon">üë§</span>
        <span class="sidebar-nav-text">Profile</span>
      </a>
    </div>
  </nav>
</aside>


    <!-- Main Content -->
    <main class="layout-main">
      <!-- Top Bar -->
      <header class="topbar">
        <div class="topbar-left">
          <button class="btn btn-secondary btn-sm">‚ò∞</button>
        </div>

        <div class="topbar-center">
        </div>

        <div class="topbar-right">
          <div class="notification-icon">
            <span>üîî</span>
            <span class="notification-count">5</span>
          </div>

          <div class="user-menu">
            <div class="user-avatar">JD</div>
            <div class="user-info">
              <div class="user-name">John Doe</div>
              <div class="user-role">Retail Client</div>
            </div>
          </div>
        </div>
      </header>

      <!-- Page Content -->
      <div class="content-container">
        
        <!-- Global Stats -->
        <div class="grid-3 mb-8">
          <div class="stat-card">
            <div class="stat-card-label">Total Value Locked</div>
            <div class="stat-card-value">‚Ç¨28,503.40</div>
            <div class="stat-card-secondary">Across 3 assets</div>
          </div>
          <div class="stat-card">
            <div class="stat-card-label">Total Rewards Earned</div>
            <div class="stat-card-value text-success">+‚Ç¨1,228.36</div>
            <div class="stat-card-secondary">All time earnings</div>
          </div>
          <div class="stat-card">
            <div class="stat-card-label">Average APY</div>
            <div class="stat-card-value">6.2%</div>
            <div class="stat-card-secondary">Weighted average</div>
          </div>
        </div>

        <!-- Recent Staking Rewards (Moved to Top & Styled like Transactions) -->
        <div class="card mb-8">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
            <h3 style="font-size: var(--text-lg); font-weight: var(--font-bold);">Recent Staking Rewards</h3>
          </div>
          <div style="overflow-x: auto;">
            <table class="table" style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="border-bottom: 1px solid var(--border-light); text-align: left;">
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Date & Time</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Type</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Asset</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase; text-align: right;">Amount</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase; text-align: right;">Value (EUR)</th>
                  <th style="padding: var(--space-4); color: var(--text-secondary); font-size: var(--text-xs); text-transform: uppercase;">Status</th>
                </tr>
              </thead>
              <tbody>
                <!-- Row 1 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 19, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #627EEA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">Œû</div>
                      <span>ETH</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+0.045 ETH</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨126.30</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
                <!-- Row 2 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 18, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #E84142; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚ñ≤</div>
                      <span>AVAX</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+1.25 AVAX</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨53.12</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
                <!-- Row 3 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 17, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #8247E5; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚¨°</div>
                      <span>POL</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+15.50 POL</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨13.64</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
                <!-- Row 4 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 16, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #627EEA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">Œû</div>
                      <span>ETH</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+0.042 ETH</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨117.88</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
                <!-- Row 5 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 15, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #E84142; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚ñ≤</div>
                      <span>AVAX</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+1.20 AVAX</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨51.00</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
                <!-- Row 6 -->
                <tr style="border-bottom: 1px solid var(--border-light);">
                  <td style="padding: var(--space-4);">
                    <div style="font-weight: var(--font-medium);">Nov 14, 2025</div>
                    <div style="font-size: var(--text-xs); color: var(--text-tertiary);">08:30:00</div>
                  </td>
                  <td style="padding: var(--space-4);">
                    <span class="badge badge-success" style="background: rgba(5, 205, 153, 0.1); color: var(--color-success);">‚ö° Reward</span>
                  </td>
                  <td style="padding: var(--space-4);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <div style="width: 24px; height: 24px; background: #8247E5; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">‚¨°</div>
                      <span>POL</span>
                    </div>
                  </td>
                  <td style="padding: var(--space-4); text-align: right; color: var(--color-success); font-weight: bold;">+15.10 POL</td>
                  <td style="padding: var(--space-4); text-align: right;">‚Ç¨13.29</td>
                  <td style="padding: var(--space-4);"><span class="badge badge-success">Completed</span></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div style="text-align: center; padding-top: var(--space-4); border-top: 1px solid var(--border-light);">
            <a href="transactions.html" class="btn btn-sm btn-secondary" title="View full staking history in Transactions">View All Staking History</a>
          </div>
        </div>

        <!-- Active Staking Positions -->
        <div class="mb-8">
          <h2 class="mb-4" style="font-size: var(--text-xl); font-weight: var(--font-bold);">My Staking Positions</h2>
          
          <!-- ETH Position -->
          <div class="card mb-4">
            <div style="display: flex; flex-wrap: wrap; gap: var(--space-6); align-items: center;">
              <!-- Asset Info -->
              <div style="flex: 1; min-width: 200px; display: flex; align-items: center; gap: var(--space-4);">
                <div style="width: 48px; height: 48px; background: #627EEA; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px;">Œû</div>
                <div>
                  <div class="font-bold text-lg">Ethereum</div>
                  <div class="text-secondary text-sm">ETH</div>
                </div>
                <span class="badge badge-success" style="margin-left: auto;">4.2% APY</span>
              </div>

              <!-- Stats Grid -->
              <div style="flex: 2; min-width: 300px; display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-4);">
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Staked</div>
                  <div class="font-bold">4.80 ETH</div>
                  <div class="text-secondary text-xs">‚Ç¨13,478.40</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Rewards</div>
                  <div class="font-bold text-success">+0.185 ETH</div>
                  <div class="text-secondary text-xs">‚Ç¨519.36</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Activation</div>
                  <div class="font-medium">~1 Day</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Unlock Period</div>
                  <div class="font-medium">3 Days</div>
                </div>
              </div>

              <!-- Actions -->
              <div style="flex: 0 0 auto; display: flex; gap: var(--space-2);">
                <button class="btn btn-secondary" onclick="openStakeModal('eth')">Stake More</button>
                <button class="btn btn-outline-secondary" onclick="openUnstakeModal('eth')">Unstake</button>
              </div>
            </div>
          </div>

          <!-- AVAX Position -->
          <div class="card mb-4">
            <div style="display: flex; flex-wrap: wrap; gap: var(--space-6); align-items: center;">
              <!-- Asset Info -->
              <div style="flex: 1; min-width: 200px; display: flex; align-items: center; gap: var(--space-4);">
                <div style="width: 48px; height: 48px; background: #E84142; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px;">A</div>
                <div>
                  <div class="font-bold text-lg">Avalanche</div>
                  <div class="text-secondary text-sm">AVAX</div>
                </div>
                <span class="badge badge-success" style="margin-left: auto;">8.5% APY</span>
              </div>

              <!-- Stats Grid -->
              <div style="flex: 2; min-width: 300px; display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-4);">
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Staked</div>
                  <div class="font-bold">250.00 AVAX</div>
                  <div class="text-secondary text-xs">‚Ç¨10,625.00</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Rewards</div>
                  <div class="font-bold text-success">+12.80 AVAX</div>
                  <div class="text-secondary text-xs">‚Ç¨544.00</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Activation</div>
                  <div class="font-medium">Immediate</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Unlock Period</div>
                  <div class="font-medium">2 Weeks</div>
                </div>
              </div>

              <!-- Actions -->
              <div style="flex: 0 0 auto; display: flex; gap: var(--space-2);">
                <button class="btn btn-secondary" onclick="openStakeModal('avax')">Stake More</button>
                <button class="btn btn-outline-secondary" onclick="openUnstakeModal('avax')">Unstake</button>
              </div>
            </div>
          </div>

          <!-- POL Position -->
          <div class="card mb-4">
            <div style="display: flex; flex-wrap: wrap; gap: var(--space-6); align-items: center;">
              <!-- Asset Info -->
              <div style="flex: 1; min-width: 200px; display: flex; align-items: center; gap: var(--space-4);">
                <div style="width: 48px; height: 48px; background: #8247E5; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px;">P</div>
                <div>
                  <div class="font-bold text-lg">Polygon</div>
                  <div class="text-secondary text-sm">POL</div>
                </div>
                <span class="badge badge-success" style="margin-left: auto;">5.8% APY</span>
              </div>

              <!-- Stats Grid -->
              <div style="flex: 2; min-width: 300px; display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-4);">
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Staked</div>
                  <div class="font-bold">5,000.00 POL</div>
                  <div class="text-secondary text-xs">‚Ç¨4,400.00</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Rewards</div>
                  <div class="font-bold text-success">+187.50 POL</div>
                  <div class="text-secondary text-xs">‚Ç¨165.00</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Activation</div>
                  <div class="font-medium">~30 Mins</div>
                </div>
                <div>
                  <div class="text-secondary text-xs uppercase tracking-wider mb-1">Unlock Period</div>
                  <div class="font-medium">3-4 Days</div>
                </div>
              </div>

              <!-- Actions -->
              <div style="flex: 0 0 auto; display: flex; gap: var(--space-2);">
                <button class="btn btn-secondary" onclick="openStakeModal('pol')">Stake More</button>
                <button class="btn btn-outline-secondary" onclick="openUnstakeModal('pol')">Unstake</button>
              </div>
            </div>
          </div>

          <!-- Stake New Asset Button -->
          <div class="card mb-4" style="border: 2px dashed var(--border-light); background: transparent; display: flex; align-items: center; justify-content: center; padding: var(--space-8); cursor: pointer; transition: all 0.2s ease;" onclick="openAssetModal()" onmouseover="this.style.borderColor='var(--color-primary)'; this.style.background='rgba(67, 24, 255, 0.02)'" onmouseout="this.style.borderColor='var(--border-light)'; this.style.background='transparent'">
            <div style="text-align: center;">
              <div style="width: 48px; height: 48px; background: var(--color-success); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; margin: 0 auto var(--space-3); box-shadow: 0 4px 10px rgba(5, 205, 153, 0.3);">+</div>
              <h3 style="font-size: var(--text-lg); font-weight: var(--font-bold); color: var(--text-primary); margin-bottom: var(--space-1);">Stake New Asset</h3>
              <p style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: 0;">Start earning rewards on a new coin</p>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- Stake Modal -->
  <div id="stake-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div class="card" style="width: 450px; max-width: 90%;">
      <div class="card-header">
        <h2 class="card-title">Stake <span id="modal-asset-name">Asset</span></h2>
        <button onclick="closeModal('stake-modal')" style="background: none; border: none; font-size: 20px; cursor: pointer;">&times;</button>
      </div>
      
      <form onsubmit="handleStakeSubmit(event)">
        <div class="mb-4">
          <label class="d-block mb-2 font-medium">From Address</label>
          <select class="form-input">
            <option value="main">Main Wallet (0x123...abc) - <span id="modal-balance-select">0.00</span></option>
            <option value="trading">Trading Wallet (0x456...def) - 0.00</option>
            <option value="vault">Savings Vault (0x789...ghi) - 0.00</option>
          </select>
        </div>

        <div class="mb-4">
          <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
            <label class="font-medium">Amount</label>
            <span class="text-secondary text-xs">Available: <span id="modal-balance">0.00</span> <span class="modal-ticker">ETH</span></span>
          </div>
          <div style="position: relative;">
            <input type="number" id="stake-amount" class="form-input" placeholder="0.00" step="any" required oninput="calculateMonthlyReward()">
            <button type="button" class="btn btn-xs btn-secondary" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);" onclick="setMaxStake()">MAX</button>
          </div>
        </div>

        <!-- Minimum Lock Warning -->
        <div class="alert alert-info mb-4" style="font-size: var(--text-sm);">
          <strong>Note:</strong> Minimum lock period for this network is <strong id="modal-min-lock">72h</strong>.
        </div>

        <div style="background: var(--bg-body); padding: var(--space-4); border-radius: var(--radius-md); margin-bottom: var(--space-6);">
          <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
            <span class="text-secondary">Estimated APY</span>
            <span class="font-bold text-success" id="modal-apy">4.2%</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
            <span class="text-secondary">Activation Time</span>
            <span class="font-medium" id="modal-activation">~1 Day</span>
          </div>
          <div style="display: flex; justify-content: space-between;">
            <span class="text-secondary">Est. Monthly Rewards</span>
            <span class="font-bold">‚âà <span id="modal-monthly-reward">0.00</span> <span class="modal-ticker">ETH</span></span>
          </div>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%;">Confirm Stake</button>
      </form>
    </div>
  </div>

  <!-- Unstake Modal -->
  <div id="unstake-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div class="card" style="width: 450px; max-width: 90%;">
      <div class="card-header">
        <h2 class="card-title">Unstake <span id="unstake-asset-name">Asset</span></h2>
        <button onclick="closeModal('unstake-modal')" style="background: none; border: none; font-size: 20px; cursor: pointer;">&times;</button>
      </div>
      
      <div class="alert alert-warning mb-6">
        <strong>Warning:</strong> Unstaking <span class="unstake-ticker">ETH</span> takes approximately <span id="unstake-period">3 days</span>. You will not earn rewards during this period.
      </div>

      <form onsubmit="handleUnstakeSubmit(event)">
        <div class="mb-4">
          <label class="d-block mb-2 font-medium">To Address</label>
          <select class="form-input">
            <option value="main">Main Wallet (0x123...abc)</option>
            <option value="trading">Trading Wallet (0x456...def)</option>
            <option value="vault">Savings Vault (0x789...ghi)</option>
          </select>
        </div>

        <div class="mb-6">
          <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
            <label class="font-medium">Amount to Unstake</label>
            <span class="text-secondary text-xs">Staked: <span id="unstake-balance">0.00</span> <span class="unstake-ticker">ETH</span></span>
          </div>
          <div style="position: relative;">
            <input type="number" id="unstake-amount" class="form-input" placeholder="0.00" step="any" required>
            <button type="button" class="btn btn-xs btn-secondary" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);" onclick="setMaxUnstake()">MAX</button>
          </div>
        </div>

        <button type="submit" class="btn btn-danger" style="width: 100%;">Confirm Unstake</button>
      </form>
    </div>
  </div>

  <!-- Asset Selection Modal (Placeholder for "Stake New Asset") -->
  <div id="assetModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: var(--bg-card); width: 100%; max-width: 500px; border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); animation: slideUp 0.3s ease-out;">
      <div style="padding: var(--space-6); border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center;">
        <h3 style="margin: 0; font-size: var(--text-xl);">Select Asset to Stake</h3>
        <button onclick="closeAssetModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-secondary);">&times;</button>
      </div>
      <div style="padding: var(--space-6); text-align: center; color: var(--text-secondary);">
        <p>More staking options coming soon!</p>
        <button class="btn btn-primary" onclick="closeAssetModal()">Close</button>
      </div>
    </div>
  </div>

  <script src="../../assets/js/nav-active.js"></script>


  
  <script src="../../assets/js/app.js"></script>
  <script>
    // Mock Data
    const stakingData = {
      eth: { name: 'Ethereum', symbol: 'ETH', balance: 18.7, staked: 4.8, apy: 4.2, activation: '~1 Day', period: '3 Days', minLock: '72h' },
      avax: { name: 'Avalanche', symbol: 'AVAX', balance: 850, staked: 250, apy: 8.5, activation: 'Immediate', period: '2 Weeks', minLock: '1 Week' },
      pol: { name: 'Polygon', symbol: 'POL', balance: 13625, staked: 5000, apy: 5.8, activation: '~30 Mins', period: '3-4 Days', minLock: '80 Checkpoints (~3 Days)' }
    };

    let currentAsset = null;

    function openStakeModal(assetId) {
      currentAsset = stakingData[assetId];
      document.getElementById('modal-asset-name').textContent = currentAsset.name;
      document.getElementById('modal-balance').textContent = currentAsset.balance;
      document.getElementById('modal-balance-select').textContent = currentAsset.balance;
      document.querySelectorAll('.modal-ticker').forEach(el => el.textContent = currentAsset.symbol);
      document.getElementById('modal-apy').textContent = currentAsset.apy + '%';
      document.getElementById('modal-activation').textContent = currentAsset.activation;
      document.getElementById('modal-min-lock').textContent = currentAsset.minLock;
      document.getElementById('stake-amount').value = '';
      document.getElementById('modal-monthly-reward').textContent = '0.00';
      document.getElementById('stake-modal').style.display = 'flex';
    }

    function calculateMonthlyReward() {
      if (!currentAsset) return;
      const amount = parseFloat(document.getElementById('stake-amount').value) || 0;
      // Monthly Reward = (Amount * APY / 100) / 12
      const monthlyReward = (amount * currentAsset.apy / 100) / 12;
      document.getElementById('modal-monthly-reward').textContent = monthlyReward.toFixed(4);
    }

    function openUnstakeModal(assetId) {
      currentAsset = stakingData[assetId];
      document.getElementById('unstake-asset-name').textContent = currentAsset.name;
      document.getElementById('unstake-balance').textContent = currentAsset.staked;
      document.querySelectorAll('.unstake-ticker').forEach(el => el.textContent = currentAsset.symbol);
      document.getElementById('unstake-period').textContent = currentAsset.period;
      document.getElementById('unstake-amount').value = '';
      document.getElementById('unstake-modal').style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    function openAssetModal() {
      document.getElementById('assetModal').style.display = 'flex';
    }

    function closeAssetModal() {
      document.getElementById('assetModal').style.display = 'none';
    }

    function setMaxStake() {
      document.getElementById('stake-amount').value = currentAsset.balance;
      calculateMonthlyReward();
    }

    function setMaxUnstake() {
      document.getElementById('unstake-amount').value = currentAsset.staked;
    }

    function handleStakeSubmit(e) {
      e.preventDefault();
      const amount = document.getElementById('stake-amount').value;
      alert(`Successfully staked ${amount} ${currentAsset.symbol}! Rewards will start accruing in ${currentAsset.activation}.`);
      closeModal('stake-modal');
    }

    function handleUnstakeSubmit(e) {
      e.preventDefault();
      const amount = document.getElementById('unstake-amount').value;
      alert(`Unstaking request for ${amount} ${currentAsset.symbol} submitted. Funds will be available after the ${currentAsset.period} unbonding period.`);
      closeModal('unstake-modal');
    }

    // Close modals on outside click
    window.onclick = function(event) {
      if (event.target.id === 'stake-modal') closeModal('stake-modal');
      if (event.target.id === 'unstake-modal') closeModal('unstake-modal');
      if (event.target.id === 'assetModal') closeAssetModal();
    }
  </script>
</body>
</html>
